{"version":3,"sources":["../ts/js/price.ts"],"names":["Price","product","template","specialPrice","hasSpecialPrice","isSpecialPrice","formatPrice","price","getBaseFormatPrice","getPrice","getOldPrice","custom_attributes","custom_attribute","attribute_code","value","getTemplate"],"mappings":";;;;;;;;;;MAIqBA,K;;;AAOjB,mBAAYC,OAAZ,EAA4C;AAAA,WAJpCC,QAIoC,GAJjB,+BAIiB;AAAA,WAHpCC,YAGoC,GAHb,EAGa;AAAA,WAFpCC,eAEoC,GAFT,KAES;AACxC,WAAKH,OAAL,GAAeA,OAAf;AACA,WAAKI,cAAL;AACH;;;;WAEOC,W,GAAR,qBAAoBC,KAApB,EAAgC;AAC5B,aAAO,YAAWD,WAAX,CAAuBC,KAAvB,EAA8B,gBAAeC,kBAAf,EAA9B,CAAP;AACH,K;;WAEOC,Q,GAAR,oBAAmB;AACf,UAAIF,KAAK,GAAG,KAAKH,eAAL,GAAuB,KAAKD,YAA5B,GAA2C,KAAKF,OAAL,CAAaM,KAApE;AACA,aAAO,KAAKD,WAAL,CAAiBC,KAAjB,CAAP;AACH,K;;WAEOG,W,GAAR,uBAAsB;AAClB,aAAO,KAAKJ,WAAL,CAAiB,KAAKL,OAAL,CAAaM,KAA9B,CAAP;AACH,K;;WAEOF,c,GAAR,0BAAyB;AACrB,2DAA6B,KAAKJ,OAAL,CAAaU,iBAA1C,wCAA6D;AAAA,YAApDC,gBAAoD;;AACzD;AACA,YAAIA,gBAAgB,CAACC,cAAjB,IAAmC,eAAvC,EAAwD;AACpD;AACA,eAAKV,YAAL,GAAoBS,gBAAgB,CAACE,KAArC;AACA,eAAKV,eAAL,GAAuB,IAAvB;AACA;AACH;AACJ;AACJ;AAED;;;;;;;WAKOW,W,GAAP,uBACA;AACI,aAAO,KAAKb,QAAZ;AACH,K","sourcesContent":["import ProductTypesInterface from \"./products-list/types/product.types\";\nimport priceUtils from 'Magento_Catalog/js/price-utils';\nimport CheckoutConfig from \"./utils/checkout-config\";\n\nexport default class Price\n{\n    private product: ProductTypesInterface;\n    private template: string = \"LB_NewStepCheckout/view/price\";\n    private specialPrice: string = '';\n    private hasSpecialPrice: boolean = false;\n\n    constructor(product: ProductTypesInterface) {\n        this.product = product;\n        this.isSpecialPrice();\n    }\n\n    private formatPrice(price: any) {\n        return priceUtils.formatPrice(price, CheckoutConfig.getBaseFormatPrice());\n    }\n\n    private getPrice() {\n        let price = this.hasSpecialPrice ? this.specialPrice : this.product.price;\n        return this.formatPrice(price);\n    }\n\n    private getOldPrice() {\n        return this.formatPrice(this.product.price);\n    }\n\n    private isSpecialPrice() {\n        for (let custom_attribute of this.product.custom_attributes) {\n            // @ts-ignore type from the rest request\n            if (custom_attribute.attribute_code == 'special_price') {\n                // @ts-ignore type from the rest request\n                this.specialPrice = custom_attribute.value;\n                this.hasSpecialPrice = true;\n                break;\n            }\n        }\n    }\n\n    /**\n     * Get template.\n     *\n     * @returns {string}\n     */\n    public getTemplate()\n    {\n        return this.template;\n    }\n}\n"],"file":"price.js"}